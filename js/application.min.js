(function(){var e,t,n,r,i,s,o,u,a,f;e=function(){function e(e){var t;this.afinn={},this.queue=[],this.running=!1,this.ready=!1,t=this,$.get(e,function(e){var n,r,i,s,o,u,a;r=e.split("\n");for(o=0,u=r.length;o<u;o++)n=r[o],a=n.split("	"),s=a[0],i=a[1],t.afinn[s]=parseInt(i);return t.ready=!0,t.work()})}return e.prototype.analyze=function(e,t){var n,r,i,s,o,u,a,f,l,c;u=e.toLowerCase().split(/\W+/),r=[];for(a=0,l=u.length;a<l;a++)o=u[a],this.afinn[o]!==void 0&&r.push(this.afinn[o]);s=0;for(f=0,c=r.length;f<c;f++)n=r[f],s+=n;return i=Math.sqrt(r.length),t(e,s/i)},e.prototype.addToQueue=function(e,t){this.queue.push({text:e,callback:t});if(!this.running&&this.ready)return this.work()},e.prototype.work=function(){var e;this.running=!0;while(this.queue.length>0)e=this.queue.shift(),this.analyze(e.text,e.callback);return this.running=!1},e}(),t=1e4,n=100,a="",i=new e("AFINN-111-emo.txt"),o=0,f=null,s=function(){return $.getJSON("http://search.twitter.com/search.json?callback=?",{q:a,result_type:"recent",since_id:o,rpp:n},function(e){return u(e)})},u=function(e){var n,u,a,f;console.log(e),o=e.max_id_str,f=e.results;for(u=0,a=f.length;u<a;u++)n=f[u],i.addToQueue(n.text,r);return setTimeout(s,t)},r=function(e,t){var n;return n=t>0?":)":t<0?":(":":|",$("#results").prepend("<p>"+n+"   "+e+"</p>")},$(document).ready(function(){return $("#searchButton").click(function(){return clearTimeout(f),$("#results").html(""),a=$("#searchTerm").val(),s()})})}).call(this);