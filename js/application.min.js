(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;e=function(){function e(e){var t;this.afinn={},this.queue=[],this.running=!1,this.ready=!1,t=this,$.get(e,function(e){var n,r,i,s,o,u,a;r=e.split("\n");for(o=0,u=r.length;o<u;o++)n=r[o],a=n.split("	"),s=a[0],i=a[1],t.afinn[s]=parseInt(i);return t.ready=!0,t.work()})}return e.prototype.analyze=function(e,t,n){var r,i,s,o,u,a,f,l,c,h;a=e.toLowerCase().split(/\W+/),i=[];for(f=0,c=a.length;f<c;f++)u=a[f],this.afinn[u]!==void 0&&i.push(this.afinn[u]);o=0;for(l=0,h=i.length;l<h;l++)r=i[l],o+=r;return s=Math.sqrt(i.length),n(e,t,o/s)},e.prototype.addToQueue=function(e,t,n){this.queue.push({text:e,metadata:t,callback:n});if(!this.running&&this.ready)return this.work()},e.prototype.work=function(){var e;this.running=!0;while(this.queue.length>0)e=this.queue.shift(),this.analyze(e.text,e.metadata,e.callback);return this.running=!1},e}(),t=1e4,n=100,c="",i=new e("AFINN-111-emo.txt"),o=0,h=null,f=0,u=0,a=0,s=function(){return $.getJSON("http://search.twitter.com/search.json?callback=?",{q:c,result_type:"recent",since_id:o,rpp:n},function(e){return l(e)})},l=function(e){var n,u,a,f;o=e.max_id_str,f=e.results;for(u=0,a=f.length;u<a;u++)n=f[u],n.iso_language_code==="en"&&i.addToQueue(n.text,n,r);return setTimeout(s,t)},r=function(e,t,n){var r;console.log(t),r=n>0?"positive":n<0?"negative":"neutral";switch(r){case"positive":f++;break;case"negative":u++;break;case"neutral":a++}return $("<div class='tweet "+r+"''>"+"<img src='"+t.profile_image_url+"' class='avatar'>"+"<strong>@"+t.from_user+"</strong><br>"+e+"<div class='clear'></div></div>").hide().prependTo("#results").slideDown("slow")},$(document).ready(function(){return $("#searchButton").click(function(){return clearTimeout(h),$("#results").html(""),c=$("#searchTerm").val(),s()})})}).call(this);